<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Page</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/56adb67a5b.js" crossorigin="anonymous"></script>
    <style>
        .error-message {
            color: red;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <div class="container mt-5" id="cont">
        <h2 class="text-center mb-4">Registration Form</h2>
        <form id="registrationForm" action="/register/admin" method="post" enctype="multipart/form-data">
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="first_name" class="form-label">First Name:</label>
                    <input type="text" class="form-control" id="first_name" name="fName" required>
                    <span id="firstNameError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="last_name" class="form-label">Last Name:</label>
                    <input type="text" class="form-control" id="last_name" name="lName" required>
                    <span id="lastNameError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="email" class="form-label">Email:</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                    <span id="emailError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="password" class="form-label">Password:</label>
                    <input type="password" class="form-control" id="password" name="password" required>
                    <span id="passwordError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="cpassword" class="form-label">Confirm Password:</label>
                    <input type="password" class="form-control" id="cpassword" required>
                    <span id="cpasswordError" class="error-message"></span>
                    <button id="show" type="button" style="background-color: brown; color: aliceblue; border: 2px;" onclick="togglePasswordVisibility()">Show</button>
                </div>
                <div class="col-md-4" id="phoneDiv">
                    <label for="phone_no" class="form-label">Phone Number:</label>
                    <input type="text" class="form-control" id="phone_no" name="phone_no" required>
                    <span id="phoneNoError" class="error-message"></span>
                </div>
            </div>
   
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="address" class="form-label">Address:</label>
                    <input type="text" class="form-control" id="address" name="address" required>
                    <span id="addressError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="date_of_birth" class="form-label">Date of Birth:</label>
                    <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
                    <span id="dobError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="state_of_origin" class="form-label">State of Origin:</label>
                    <input type="text" class="form-control" id="state_of_origin" name="state" required>
                    <span id="stateError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="LGA" class="form-label">Local Government Area:</label>
                    <input type="text" class="form-control" id="LGA" name="LGA" required>
                    <span id="lgaError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="gender" class="form-label">Gender:</label>
                    <select class="form-select" id="gender" name="gender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                    <span id="genderError" class="error-message"></span>
                </div>
                <div class="col-md-4">
                    <label for="profile_image" class="form-label">Upload Passport:</label>
                    <input type="file" class="form-control" id="profile_image" name="profileImage" accept="image/*" required>
                    <span id="profileImageError" class="error-message"></span>
                </div>
            </div>
        
            <div class="center">
                <button type="submit" class="btn btn-primary">Register</button>
            </div>
        </form>
    </div>

    <script>
        function togglePasswordVisibility() {
            const passwordField = document.getElementById('password');
            const cpasswordField = document.getElementById('cpassword');
            const type = passwordField.type === 'password' ? 'text' : 'password';
            passwordField.type = type;
            cpasswordField.type = type;
        }

        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const fName = document.getElementById('first_name').value.trim();
            const lName = document.getElementById('last_name').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const cpassword = document.getElementById('cpassword').value.trim();
            const phone_no = document.getElementById('phone_no').value.trim();
            const address = document.getElementById('address').value.trim();
            const date_of_birth = document.getElementById('date_of_birth').value.trim();
            const state = document.getElementById('state_of_origin').value.trim();
            const LGA = document.getElementById('LGA').value.trim();
            const gender = document.getElementById('gender').value;

            const fnameRegex = /^[A-Za-z\s.'-]+$/;
            const lnameRegex = /^[A-Za-z\s.'-]+$/;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z\d])[A-Za-z\d@$!%*?&<>^.,:;[\]{}()|~`#\-_/\\+=]{4,}$/;
            const phone_numberRegex = /^\+?\d{1,4}[-\s]?\d{1,15}$/;
            const addressRegex = /^[A-Za-z0-9\s.,#'-]+$/;
            const stateRegex = /^[A-Za-z\s.'-]+$/;
            const lgaRegex = /^[A-Za-z\s\-'â€™]+$/;

            let valid = true;

            document.getElementById('firstNameError').textContent = '';
            document.getElementById('lastNameError').textContent = '';
            document.getElementById('emailError').textContent = '';
            document.getElementById('passwordError').textContent = '';
            document.getElementById('cpasswordError').textContent = '';
            document.getElementById('phoneNoError').textContent = '';
            document.getElementById('addressError').textContent = '';
            document.getElementById('dobError').textContent = '';
            document.getElementById('stateError').textContent = '';
            document.getElementById('lgaError').textContent = '';
            document.getElementById('genderError').textContent = '';
            document.getElementById('profileImageError').textContent = '';

            if (!fnameRegex.test(fName)) {
                document.getElementById('firstNameError').textContent = "Invalid first name format. Only letters, spaces, apostrophes, and hyphens are allowed.";
                valid = false;
            }
            if (!lnameRegex.test(lName)) {
                document.getElementById('lastNameError').textContent = "Invalid last name format. Only letters, spaces, apostrophes, and hyphens are allowed.";
                valid = false;
            }
            if (!emailRegex.test(email)) {
                document.getElementById('emailError').textContent = "Invalid email format.";
                valid = false;
            }
            if (!passwordRegex.test(password)) {
                document.getElementById('passwordError').textContent = "Invalid password format. Must contain upper and lower case letters, a number, and a special character.";
                valid = false;
            }
            if (password !== cpassword) {
                document.getElementById('cpasswordError').textContent = "Passwords do not match.";
                valid = false;
            }
            if (!phone_numberRegex.test(phone_no)) {
                document.getElementById('phoneNoError').textContent = "Invalid phone number format.";
                valid = false;
            }
            if (!addressRegex.test(address)) {
                document.getElementById('addressError').textContent = "Invalid address format.";
                valid = false;
            }
            if (isNaN(Date.parse(date_of_birth))) {
                document.getElementById('dobError').textContent = "Invalid date of birth format.";
                valid = false;
            }
            if (!stateRegex.test(state)) {
                document.getElementById('stateError').textContent = "Invalid state format.";
                valid = false;
            }
            if (!lgaRegex.test(LGA)) {
                document.getElementById('lgaError').textContent = "Invalid LGA format.";
                valid = false;
            }
            if (!gender) {
                document.getElementById('genderError').textContent = "Gender is required.";
                valid = false;
            }

            if (valid) {
                this.submit();
            }
        });
    </script>
</body>
</html>
